<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script
  src="http://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
    <script src="https://cdn.plot.ly/plotly-1.2.0.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    

</head>
<body>
    <div class="container">
            
        
            <form action="" style="width: 300px; margin: auto">
                <div class="form-group">
                  <label for="formGroup">Current Weight</label>
                  <input type="text" class="form-control" id="formGroupExampleInput" placeholder="">
                </div>
                <div class="form-group">
                  <label for="formGroupExampleInput2">Date</label>
                  <input type="date" class="form-control" id="formGroupExampleInput2" placeholder="">
                </div>
                <div>
                  <input class="btn btn-primary" type="submit" value="Submit">
                </div>
                </form>

            
                <div id="chart"></div>
        
                <div id="tester" style="width:600px;height:250px;"></div>
                <script>
            


                // 1. Pull the local storage values, parse them into arrays, and save them as variables
                var weights=JSON.parse(localStorage.getItem("weights")) || []
                var dates=JSON.parse(localStorage.getItem("dates")) || []

            
                // 3. Click Handler
                $(".btn").on("click", function(events) {
                events.preventDefault();
                // Pull the user entered data, parse as numbers, save as variables
                var weight=parseInt($("#formGroupExampleInput").val().trim())
                var date=parseInt($("#formGroupExampleInput2").val().trim())
                // Add these new data points to the masters arrays above
                weights.push(weight);
                dates.push(date);

                // Replot the graph with the updated data
                Plotly.plot( TESTER, [{
                    // x axis will be for date 
                    // uni
                x: dates,
                y: weights }], {
                margin: { t: 0 } } );

                // Convert the updated master arrays to strings and save them to local storage
                localStorage.setItem("weights", JSON.stringify(weights));
                localStorage.setItem("dates", JSON.stringify(dates));
                console.log(weights, dates)
            })

            

            
               // 2. Render the graph with the data pulled from the local storage on page load
                TESTER = document.getElementById('tester');
                Plotly.plot( TESTER, [{
                    // x axis will be for date 
                    // uni
                x: dates,
                y: weights }], {
                margin: { t: 0 } } );
        </script>


</div>
</body>
</html>